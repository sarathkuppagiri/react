{"version":3,"sources":["Utils/Common.js","Login.js","Dashboard.js","Home.js","Utils/PrivateRoute.js","Utils/PublicRoute.js","App.js","index.js"],"names":["getUser","userStr","sessionStorage","getItem","JSON","parse","getToken","removeUserSession","removeItem","setUserSession","token","user","setItem","stringify","useFormInput","initialValue","useState","value","setValue","onChange","e","target","Login","props","loading","setLoading","username","password","error","setError","type","autoComplete","style","marginTop","color","onClick","axios","get","then","response","data","history","push","catch","status","message","disabled","Dashboard","name","Home","PrivateRoute","Component","component","rest","render","to","pathname","state","from","location","PublicRoute","App","authLoading","setAuthLoading","useEffect","className","exact","activeClassName","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.108109c5.chunk.js","sourcesContent":["// return the user data from the session storage\nexport const getUser = () => {\n  const userStr = sessionStorage.getItem('data');\n  if (userStr) return JSON.parse(userStr);\n  else return null;\n}\n\n// return the token from the session storage\nexport const getToken = () => {\n  return sessionStorage.getItem('token') || null;\n}\n\n// remove the token and user from the session storage\nexport const removeUserSession = () => {\n  sessionStorage.removeItem('token');\n  sessionStorage.removeItem('user');\n}\n\n// set the token and user from the session storage\nexport const setUserSession = (token, user) => {\n  sessionStorage.setItem('token', token);\n  sessionStorage.setItem('user', JSON.stringify(user));\n}","import React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\n\nfunction Login(props) {\n  const [loading, setLoading] = useState(false);\n  const username = useFormInput('');\n  const password = useFormInput('');\n  const [error, setError] = useState(null);\n\n  // handle button click of login form\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.get('http://localhost:9000/getProfileData').then(response => {\n      setLoading(false);\n      setUserSession(response.data.token, response.data);\n      props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      if (error.response.status === 401) setError(error.response.data.message);\n      else setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n\n  return (\n    <div>\n      Login<br /><br />\n      <div>\n        Username<br />\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </div>\n      <div style={{ marginTop: 10 }}>\n        Password<br />\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </div>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\n    </div>\n  );\n}\n\nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n\nexport default Login;","import React from 'react';\nimport { getUser, removeUserSession } from './Utils/Common';\n\nfunction Dashboard(props) {\n  const user = getUser();\n\n  // handle click event of logout button\n  const handleLogout = () => {\n    removeUserSession();\n    props.history.push('/login');\n  }\n\n  return (\n    <div>\n      Welcome {user.name}!<br /><br />\n      <input type=\"button\" onClick={handleLogout} value=\"Logout\" />\n    </div>\n  );\n}\n\nexport default Dashboard;\n","import React from 'react';\n\nfunction Home() {\n  return (\n    <div>\n      Welcome to the Home Page!\n    </div>\n  );\n}\n\nexport default Home;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { getToken } from './Common';\n\n// handle the private routes\nfunction PrivateRoute({ component: Component, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={(props) => getToken() ? <Component {...props} /> : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />}\n    />\n  )\n}\n\nexport default PrivateRoute;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { getToken } from './Common';\n\n// handle the public routes\nfunction PublicRoute({ component: Component, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={(props) => !getToken() ? <Component {...props} /> : <Redirect to={{ pathname: '/dashboard' }} />}\n    />\n  )\n}\n\nexport default PublicRoute;","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Switch, Route, NavLink } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Login from './Login';\nimport Dashboard from './Dashboard';\nimport Home from './Home';\n\nimport PrivateRoute from './Utils/PrivateRoute';\nimport PublicRoute from './Utils/PublicRoute';\nimport { getToken, removeUserSession, setUserSession } from './Utils/Common';\n\nfunction App() {\n  const [authLoading, setAuthLoading] = useState(true);\n\n  useEffect(() => {\n    const token = getToken();\n    if (!token) {\n      return;\n    }\n\n    axios.get(`http://localhost:4000/verifyToken?token=${token}`).then(response => {\n      setUserSession(response.data.token, response.data.user);\n      setAuthLoading(false);\n    }).catch(error => {\n      removeUserSession();\n      setAuthLoading(false);\n    });\n  }, []);\n\n  if (authLoading && getToken()) {\n    return <div className=\"content\">Checking Authentication...</div>\n  }\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <div>\n          <div className=\"header\">\n            <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\n            <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink><small>(Access without token only)</small>\n            <NavLink activeClassName=\"active\" to=\"/dashboard\">Dashboard</NavLink><small>(Access with token only)</small>\n          </div>\n          <div className=\"content\">\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              <PublicRoute path=\"/login\" component={Login} />\n              <PrivateRoute path=\"/dashboard\" component={Dashboard} />\n            </Switch>\n          </div>\n        </div>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}