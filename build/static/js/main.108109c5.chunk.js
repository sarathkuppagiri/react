(this["webpackJsonplogin-app-reactjs"]=this["webpackJsonplogin-app-reactjs"]||[]).push([[0],{29:function(e,t,a){e.exports=a(57)},34:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),o=a.n(l),c=(a(34),a(9)),s=a(8),u=a(7),i=a(11),m=a.n(i),p=function(){var e=sessionStorage.getItem("data");return e?JSON.parse(e):null},E=function(){return sessionStorage.getItem("token")||null},b=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},d=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))};var g=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),r=a[0],l=a[1];return{value:r,onChange:function(e){l(e.target.value)}}},v=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1],s=g(""),u=g(""),i=Object(n.useState)(null),p=Object(c.a)(i,2),E=p[0],b=p[1];return r.a.createElement("div",null,"Login",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Username",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"text"},s,{autoComplete:"new-password"}))),r.a.createElement("div",{style:{marginTop:10}},"Password",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"password"},u,{autoComplete:"new-password"}))),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{style:{color:"red"}},E),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:l?"Loading...":"Login",onClick:function(){b(null),o(!0),m.a.get("http://localhost:9000/getProfileData").then((function(t){o(!1),d(t.data.token,t.data),e.history.push("/dashboard")})).catch((function(e){o(!1),401===e.response.status?b(e.response.data.message):b("Something went wrong. Please try again later.")}))},disabled:l}),r.a.createElement("br",null))};var h=function(e){var t=p();return r.a.createElement("div",null,"Welcome ",t.name,"!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"button",onClick:function(){b(),e.history.push("/login")},value:"Logout"}))};var f=function(){return r.a.createElement("div",null,"Welcome to the Home Page!")},j=a(12);var O=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return E()?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var k=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return E()?r.a.createElement(u.a,{to:{pathname:"/dashboard"}}):r.a.createElement(t,e)}}))};var y=function(){var e=Object(n.useState)(!0),t=Object(c.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=E();e&&m.a.get("http://localhost:4000/verifyToken?token=".concat(e)).then((function(e){d(e.data.token,e.data.user),l(!1)})).catch((function(e){b(),l(!1)}))}),[]),a&&E()?r.a.createElement("div",{className:"content"},"Checking Authentication..."):r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(s.b,{exact:!0,activeClassName:"active",to:"/"},"Home"),r.a.createElement(s.b,{activeClassName:"active",to:"/login"},"Login"),r.a.createElement("small",null,"(Access without token only)"),r.a.createElement(s.b,{activeClassName:"active",to:"/dashboard"},"Dashboard"),r.a.createElement("small",null,"(Access with token only)")),r.a.createElement("div",{className:"content"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:f}),r.a.createElement(k,{path:"/login",component:v}),r.a.createElement(O,{path:"/dashboard",component:h}))))))};o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.108109c5.chunk.js.map